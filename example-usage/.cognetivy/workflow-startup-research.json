{
  "workflow_id": "wf_default",
  "version": "v1",
  "nodes": [
    {
      "id": "expand_domain",
      "type": "TASK",
      "contract": { "input": ["topic"], "output": ["expanded_domains"] },
      "description": "Expand the startup topic into sub-domains, adjacent markets, and related verticals. For each area, identify: (1) the core problem space, (2) adjacent industries that could be disrupted, (3) technology enablers that might apply, (4) geographic or demographic segments worth considering. Output a structured list of expanded_domains with brief rationale for each. This expansion ensures we do not miss non-obvious 'why now' signals that sit at the intersection of domains."
    },
    {
      "id": "tech_breakthroughs",
      "type": "TASK",
      "contract": { "input": ["expanded_domains"], "output": ["tech_sources"] },
      "description": "Research technology breakthroughs and enabling innovations relevant to the expanded domains. Search for: new infrastructure (e.g. LLMs, edge compute, 5G), cost curves that crossed thresholds, open-source or API availability that lowered barriers, and recent academic or industry R&D milestones. For EACH source found: (1) assign a reliability tier (primary/academic, industry-report, news, blog, social) and explain WHY that source is trustworthy (methodology, author credentials, recency, peer review); (2) assign importance (high/medium/low) for the why-now thesis and explain WHY this source matters for startup timing. Store as qualified sources with url, title, reliability, reliability_reason, importance, importance_reason, category=tech."
    },
    {
      "id": "market_signals",
      "type": "TASK",
      "contract": { "input": ["expanded_domains"], "output": ["market_sources"] },
      "description": "Research market timing signals: TAM/SAM growth rates, adoption curves, regulatory tailwinds or headwinds, and inflection points in buyer behavior. Look for reports from Gartner, McKinsey, CB Insights, or domain-specific analysts. For EACH source: (1) qualify reliability—explain why the source is credible (sample size, methodology, independence); (2) qualify importance—explain why this data matters for 'why now' (e.g. market crossed $X, growth accelerated, new segment emerged). Store as qualified sources with url, title, reliability, reliability_reason, importance, importance_reason, category=market."
    },
    {
      "id": "regulatory_signals",
      "type": "TASK",
      "contract": { "input": ["expanded_domains"], "output": ["regulatory_sources"] },
      "description": "Research regulatory and policy shifts that create or remove barriers. Include: new legislation, enforcement changes, standards bodies, privacy rules (GDPR, CCPA), and sector-specific compliance requirements. For EACH source: (1) reliability—explain why the source is authoritative (official gov site, legal analysis, trade association); (2) importance—explain how this regulation creates a 'why now' moment (e.g. new mandate creates demand, enforcement change opens opportunity). Store as qualified sources with url, title, reliability, reliability_reason, importance, importance_reason, category=regulatory."
    },
    {
      "id": "competitor_landscape",
      "type": "TASK",
      "contract": { "input": ["expanded_domains"], "output": ["competitor_sources"] },
      "description": "Research the competitive landscape: incumbents, recent entrants, failed attempts, and white space. Identify why past attempts failed and what has changed. For EACH source: (1) reliability—explain why the source is credible (primary research, Crunchbase, earnings calls, expert interviews); (2) importance—explain why this competitive signal matters for timing (e.g. incumbent distracted, new entrant validated market, gap emerged). Store as qualified sources with url, title, reliability, reliability_reason, importance, importance_reason, category=competitor."
    },
    {
      "id": "funding_signals",
      "type": "TASK",
      "contract": { "input": ["expanded_domains"], "output": ["funding_sources"] },
      "description": "Research funding and venture activity: recent rounds, new funds focused on the space, corporate venture, and grant programs. For EACH source: (1) reliability—explain why the source is trustworthy (Crunchbase, press release, SEC filings); (2) importance—explain why this funding signal supports 'why now' (e.g. capital availability, investor thesis shift, corporate mandate). Store as qualified sources with url, title, reliability, reliability_reason, importance, importance_reason, category=funding."
    },
    {
      "id": "consumer_behavior",
      "type": "TASK",
      "contract": { "input": ["expanded_domains"], "output": ["behavior_sources"] },
      "description": "Research consumer and buyer behavior shifts: adoption curves, willingness-to-pay changes, new habits post-pandemic, generational shifts, and B2B buying process changes. For EACH source: (1) reliability—explain why the source is credible (survey methodology, sample size, longitudinal data); (2) importance—explain why this behavior shift creates a 'why now' moment (e.g. new willingness to pay, habit formation, decision-maker change). Store as qualified sources with url, title, reliability, reliability_reason, importance, importance_reason, category=behavior."
    },
    {
      "id": "synthesize_why_now",
      "type": "TASK",
      "contract": {
        "input": ["tech_sources", "market_sources", "regulatory_sources", "competitor_sources", "funding_sources", "behavior_sources"],
        "output": ["ideas"]
      },
      "description": "Synthesize all qualified sources into 2–4 startup ideas with a strong 'why now' thesis. For each idea: (1) write a one-paragraph idea_summary; (2) write a compelling why_now_thesis that weaves together evidence from multiple source categories—cite specific reliability and importance rationales; (3) list supporting_sources (IDs or refs) that back the thesis; (4) assign confidence (high/medium/low) based on source quality and convergence. Prioritize ideas where multiple independent, high-reliability sources converge on the same timing signal. Reject ideas that rely on single low-reliability sources."
    }
  ],
  "edges": [
    { "from": "expand_domain", "to": "tech_breakthroughs" },
    { "from": "expand_domain", "to": "market_signals" },
    { "from": "expand_domain", "to": "regulatory_signals" },
    { "from": "expand_domain", "to": "competitor_landscape" },
    { "from": "expand_domain", "to": "funding_signals" },
    { "from": "expand_domain", "to": "consumer_behavior" },
    { "from": "tech_breakthroughs", "to": "synthesize_why_now" },
    { "from": "market_signals", "to": "synthesize_why_now" },
    { "from": "regulatory_signals", "to": "synthesize_why_now" },
    { "from": "competitor_landscape", "to": "synthesize_why_now" },
    { "from": "funding_signals", "to": "synthesize_why_now" },
    { "from": "consumer_behavior", "to": "synthesize_why_now" }
  ]
}
